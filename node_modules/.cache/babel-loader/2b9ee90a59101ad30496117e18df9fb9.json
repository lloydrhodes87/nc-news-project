{"ast":null,"code":"import _objectSpread from \"/Users/lloydrhodes/Desktop/nc-news-project/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _defineProperty from \"/Users/lloydrhodes/Desktop/nc-news-project/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/lloydrhodes/Desktop/nc-news-project/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/lloydrhodes/Desktop/nc-news-project/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/lloydrhodes/Desktop/nc-news-project/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/lloydrhodes/Desktop/nc-news-project/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/lloydrhodes/Desktop/nc-news-project/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/lloydrhodes/Desktop/nc-news-project/src/components/AddComment.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport Err from './Err';\n\nvar AddComment =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AddComment, _Component);\n\n  function AddComment() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, AddComment);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(AddComment)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      body: '',\n      hasError: false,\n      error: ''\n    };\n\n    _this.handleChange = function (event) {\n      var id = event.target.id;\n\n      _this.setState(_defineProperty({}, id, event.target.value));\n    };\n\n    _this.handleSubmit = function (event) {\n      event.preventDefault();\n\n      _this.addComment();\n\n      _this.setState({\n        body: ''\n      });\n    };\n\n    _this.addComment = function () {\n      var _this$props = _this.props,\n          articleid = _this$props.articleid,\n          user = _this$props.user,\n          getComment = _this$props.getComment;\n      var body = _this.state.body;\n      var object = {\n        username: user.username,\n        body: body\n      };\n      axios.post(\"https://lloyd-news.herokuapp.com/api/articles/\".concat(articleid, \"/comments\"), object).then(function (_ref) {\n        var data = _ref.data;\n        var comment = data.comment;\n        comment = _objectSpread({}, comment, {\n          author: user.username\n        });\n        delete comment.username;\n        getComment(comment);\n      }).catch(function (err) {\n        _this.setState({\n          hasError: true,\n          error: err\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(AddComment, [{\n    key: \"render\",\n    value: function render() {\n      var user = this.props.user;\n      var body = this.state.body;\n      var _this$state = this.state,\n          hasError = _this$state.hasError,\n          error = _this$state.error;\n      if (hasError) return React.createElement(Err, {\n        error: error,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 17\n        },\n        __self: this\n      });\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 20\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 21\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        className: \"avatarInArticles\",\n        src: user.avatar_url,\n        alt: \"avatar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 22\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 23\n        },\n        __self: this\n      }, \"commenting as:\", user.username, \" \"), React.createElement(\"div\", {\n        className: \"addCommentButton\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 24\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 25\n        },\n        __self: this\n      }), React.createElement(\"textarea\", {\n        type: \"text\",\n        id: \"body\",\n        onChange: this.handleChange,\n        value: body,\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 26\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 27\n        },\n        __self: this\n      }, \"Add Comment\"))));\n    }\n  }]);\n\n  return AddComment;\n}(Component);\n\nexport default AddComment;","map":{"version":3,"sources":["/Users/lloydrhodes/Desktop/nc-news-project/src/components/AddComment.js"],"names":["React","Component","axios","Err","AddComment","state","body","hasError","error","handleChange","event","id","target","setState","value","handleSubmit","preventDefault","addComment","props","articleid","user","getComment","object","username","post","then","data","comment","author","catch","err","avatar_url"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport Err from './Err';\n\nclass AddComment extends Component {\n  state = {\n    body: '',\n    hasError: false,\n    error: ''\n  };\n  \n  render() {\n    const { user } = this.props;\n    const { body } = this.state;\n\n    const { hasError, error } = this.state\n    if (hasError) return <Err error={error} />\n    \n    return (\n      <div>\n        <form onSubmit={this.handleSubmit}>\n          <img className=\"avatarInArticles\" src={user.avatar_url} alt=\"avatar\"></img>\n          <p>commenting as:{user.username} </p>\n          <div className=\"addCommentButton\">\n            <label htmlFor=\"body\"></label>\n            <textarea type=\"text\" id=\"body\" onChange={this.handleChange} value={body} required/>\n            <button type=\"submit\">Add Comment</button>\n          </div>        \n        </form>\n      </div>\n    );\n  }\n  handleChange = event => {\n    const { id } = event.target;\n    this.setState({\n      [id]: event.target.value\n    });\n  };\n \n\n    handleSubmit = (event) => {\n        event.preventDefault();\n        this.addComment();\n        this.setState({\n            body: ''\n        })\n    };\n\n  addComment = () => {\n\n    const { articleid, user, getComment } = this.props;\n    const { body } = this.state\n    const object = {\n      username: user.username,\n      body: body\n    }\n    axios\n      .post(`https://lloyd-news.herokuapp.com/api/articles/${articleid}/comments`, object)\n      .then(({ data }) => {\n        let comment = data.comment;\n        comment = { ...comment, author: user.username };\n        delete comment.username;\n        getComment(comment);\n      })     \n      .catch(err => {\n        this.setState({\n          hasError: true,\n          error: err\n        })\n      });\n\n\n    }\n    \n}\n\nexport default AddComment;"]},"metadata":{},"sourceType":"module"}