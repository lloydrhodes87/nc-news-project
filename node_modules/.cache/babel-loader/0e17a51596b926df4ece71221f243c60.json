{"ast":null,"code":"import _objectSpread from \"/Users/lloydrhodes/Desktop/nc-news-project/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _defineProperty from \"/Users/lloydrhodes/Desktop/nc-news-project/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/lloydrhodes/Desktop/nc-news-project/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/lloydrhodes/Desktop/nc-news-project/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/lloydrhodes/Desktop/nc-news-project/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/lloydrhodes/Desktop/nc-news-project/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/lloydrhodes/Desktop/nc-news-project/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/lloydrhodes/Desktop/nc-news-project/src/components/AddArticle.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport * as api from '../Utils/fetchData';\nimport Err from './Err';\n\nvar AddArticle =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AddArticle, _Component);\n\n  function AddArticle() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, AddArticle);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(AddArticle)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      title: '',\n      body: '',\n      topic: '',\n      username: _this.props.user.username,\n      topics: [],\n      hasError: false,\n      error: ''\n    };\n\n    _this.componentDidMount = function () {\n      _this.setTopicArray();\n    };\n\n    _this.handleChange = function (event) {\n      var _event$target = event.target,\n          id = _event$target.id,\n          value = _event$target.value;\n\n      _this.setState(_defineProperty({}, id, value));\n    };\n\n    _this.handleSubmit = function (event) {\n      event.preventDefault();\n      var _this$state = _this.state,\n          title = _this$state.title,\n          username = _this$state.username,\n          body = _this$state.body,\n          topic = _this$state.topic;\n      var fetchNewArticle = _this.props.fetchNewArticle;\n      var object = {\n        username: username,\n        body: body,\n        title: title\n      };\n      axios.post(\"https://lloyd-news.herokuapp.com/api/topics/\".concat(topic, \"/articles\"), object).then(function (_ref) {\n        var data = _ref.data;\n        console.log(data);\n        var article = data.article;\n        article = _objectSpread({}, article, {\n          author: article.username\n        });\n        delete article.username;\n        fetchNewArticle(article);\n      }).then(function () {\n        _this.setState({\n          username: '',\n          body: '',\n          title: ''\n        });\n      }).catch(function (err) {\n        _this.setState({\n          hasError: true,\n          error: err\n        });\n      });\n    };\n\n    _this.setTopicArray = function () {\n      api.fetchTopics().then(function (topics) {\n        _this.setState({\n          topics: topics\n        });\n      }).catch(function (err) {\n        _this.setState({\n          hasError: true,\n          error: err\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(AddArticle, [{\n    key: \"render\",\n    value: function render() {\n      var user = this.props.user;\n      var topics = this.state.topics;\n      var _this$state2 = this.state,\n          hasError = _this$state2.hasError,\n          error = _this$state2.error;\n      if (hasError) return React.createElement(Err, {\n        error: error,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 21\n        },\n        __self: this\n      });\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 24\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 25\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"topAddArticleForm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 26\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 27\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        id: \"title\",\n        type: \"text\",\n        onChange: this.handleChange,\n        value: this.state.title,\n        placeholder: \"Title\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 28\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        htmlFor: \"body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 36\n        },\n        __self: this\n      }), React.createElement(\"textarea\", {\n        id: \"body\",\n        type: \"text\",\n        onChange: this.handleChange,\n        value: this.state.body,\n        placeholder: \"Body\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 37\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        className: \"selectLabel\",\n        htmlFor: \"topic\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }, \"Topic\"), React.createElement(\"div\", {\n        className: \"categories\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }, React.createElement(\"select\", {\n        className: \"select\",\n        id: \"topic\",\n        value: this.state.topic,\n        onChange: this.handleChange,\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }), topics.map(function (topic) {\n        return React.createElement(\"option\", {\n          key: topic.slug,\n          id: topic,\n          value: topic.slug,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59\n          },\n          __self: this\n        }, topic.slug);\n      })))), React.createElement(\"div\", {\n        className: \"postingAsBox\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        id: \"postingAs\",\n        src: user.avatar_url,\n        alt: \"avatar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, \"Posting as: \", user.username)), React.createElement(\"button\", {\n        id: \"addArticleButton\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, \"Add Article\")), React.createElement(\"hr\", {\n        id: \"hr\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return AddArticle;\n}(Component);\n\nexport default AddArticle;","map":{"version":3,"sources":["/Users/lloydrhodes/Desktop/nc-news-project/src/components/AddArticle.js"],"names":["React","Component","axios","api","Err","AddArticle","state","title","body","topic","username","props","user","topics","hasError","error","componentDidMount","setTopicArray","handleChange","event","target","id","value","setState","handleSubmit","preventDefault","fetchNewArticle","object","post","then","data","console","log","article","author","catch","err","fetchTopics","map","slug","avatar_url"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,KAAKC,GAAZ,MAAqB,oBAArB;AACA,OAAOC,GAAP,MAAgB,OAAhB;;IAEMC,U;;;;;;;;;;;;;;;;;UACJC,K,GAAQ;AACNC,MAAAA,KAAK,EAAE,EADD;AAENC,MAAAA,IAAI,EAAE,EAFA;AAGNC,MAAAA,KAAK,EAAE,EAHD;AAINC,MAAAA,QAAQ,EAAE,MAAKC,KAAL,CAAWC,IAAX,CAAgBF,QAJpB;AAKNG,MAAAA,MAAM,EAAE,EALF;AAMNC,MAAAA,QAAQ,EAAE,KANJ;AAONC,MAAAA,KAAK,EAAE;AAPD,K;;UAwERC,iB,GAAoB,YAAM;AACxB,YAAKC,aAAL;AACD,K;;UAEDC,Y,GAAe,UAAAC,KAAK,EAAI;AAAA,0BACAA,KAAK,CAACC,MADN;AAAA,UACdC,EADc,iBACdA,EADc;AAAA,UACVC,KADU,iBACVA,KADU;;AAEtB,YAAKC,QAAL,qBACGF,EADH,EACQC,KADR;AAGD,K;;UACDE,Y,GAAe,UAAAL,KAAK,EAAI;AACtBA,MAAAA,KAAK,CAACM,cAAN;AADsB,wBAEmB,MAAKnB,KAFxB;AAAA,UAEdC,KAFc,eAEdA,KAFc;AAAA,UAEPG,QAFO,eAEPA,QAFO;AAAA,UAEGF,IAFH,eAEGA,IAFH;AAAA,UAESC,KAFT,eAESA,KAFT;AAAA,UAGdiB,eAHc,GAGM,MAAKf,KAHX,CAGde,eAHc;AAKtB,UAAMC,MAAM,GAAG;AACbjB,QAAAA,QAAQ,EAAEA,QADG;AAEbF,QAAAA,IAAI,EAAEA,IAFO;AAGbD,QAAAA,KAAK,EAAEA;AAHM,OAAf;AAMAL,MAAAA,KAAK,CACF0B,IADH,uDAEmDnB,KAFnD,gBAGIkB,MAHJ,EAKGE,IALH,CAKQ,gBAAc;AAAA,YAAXC,IAAW,QAAXA,IAAW;AAClBC,QAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACA,YAAIG,OAAO,GAAGH,IAAI,CAACG,OAAnB;AACAA,QAAAA,OAAO,qBAAQA,OAAR;AAAiBC,UAAAA,MAAM,EAAED,OAAO,CAACvB;AAAjC,UAAP;AACA,eAAOuB,OAAO,CAACvB,QAAf;AACAgB,QAAAA,eAAe,CAACO,OAAD,CAAf;AACD,OAXH,EAYGJ,IAZH,CAYQ,YAAM;AACV,cAAKN,QAAL,CAAc;AACZb,UAAAA,QAAQ,EAAE,EADE;AAEZF,UAAAA,IAAI,EAAE,EAFM;AAGZD,UAAAA,KAAK,EAAE;AAHK,SAAd;AAKD,OAlBH,EAmBG4B,KAnBH,CAmBS,UAAAC,GAAG,EAAI;AACZ,cAAKb,QAAL,CAAc;AACZT,UAAAA,QAAQ,EAAE,IADE;AAEZC,UAAAA,KAAK,EAAEqB;AAFK,SAAd;AAID,OAxBH;AAyBD,K;;UACDnB,a,GAAgB,YAAM;AACpBd,MAAAA,GAAG,CAACkC,WAAJ,GAAkBR,IAAlB,CAAuB,UAAAhB,MAAM,EAAI;AAC/B,cAAKU,QAAL,CAAc;AACZV,UAAAA,MAAM,EAANA;AADY,SAAd;AAGD,OAJD,EAKCsB,KALD,CAKO,UAAAC,GAAG,EAAI;AAEV,cAAKb,QAAL,CAAc;AACZT,UAAAA,QAAQ,EAAE,IADE;AAEZC,UAAAA,KAAK,EAAEqB;AAFK,SAAd;AAIH,OAXD;AAYD,K;;;;;;;6BA3HQ;AAAA,UACCxB,IADD,GACU,KAAKD,KADf,CACCC,IADD;AAAA,UAECC,MAFD,GAEY,KAAKP,KAFjB,CAECO,MAFD;AAAA,yBAIqB,KAAKP,KAJ1B;AAAA,UAICQ,QAJD,gBAICA,QAJD;AAAA,UAIWC,KAJX,gBAIWA,KAJX;AAKP,UAAID,QAAJ,EAAc,OAAO,oBAAC,GAAD;AAAK,QAAA,KAAK,EAAEC,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AAEd,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAM,QAAA,QAAQ,EAAE,KAAKS,YAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAO,QAAA,OAAO,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAEE;AACE,QAAA,EAAE,EAAC,OADL;AAEE,QAAA,IAAI,EAAC,MAFP;AAGE,QAAA,QAAQ,EAAE,KAAKN,YAHjB;AAIE,QAAA,KAAK,EAAE,KAAKZ,KAAL,CAAWC,KAJpB;AAKE,QAAA,WAAW,EAAC,OALd;AAME,QAAA,QAAQ,MANV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,EAUE;AAAO,QAAA,OAAO,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAVF,EAWE;AACE,QAAA,EAAE,EAAC,MADL;AAEE,QAAA,IAAI,EAAC,MAFP;AAGE,QAAA,QAAQ,EAAE,KAAKW,YAHjB;AAIE,QAAA,KAAK,EAAE,KAAKZ,KAAL,CAAWE,IAJpB;AAKE,QAAA,WAAW,EAAC,MALd;AAME,QAAA,QAAQ,MANV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAXF,EAmBE;AAAO,QAAA,SAAS,EAAC,aAAjB;AAA+B,QAAA,OAAO,EAAC,OAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAnBF,EAsBE;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AACE,QAAA,SAAS,EAAC,QADZ;AAEE,QAAA,EAAE,EAAC,OAFL;AAGE,QAAA,KAAK,EAAE,KAAKF,KAAL,CAAWG,KAHpB;AAIE,QAAA,QAAQ,EAAE,KAAKS,YAJjB;AAKE,QAAA,QAAQ,MALV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAPF,EAQGL,MAAM,CAACyB,GAAP,CAAW,UAAA7B,KAAK,EAAI;AACnB,eACE;AAAQ,UAAA,GAAG,EAAEA,KAAK,CAAC8B,IAAnB;AAAyB,UAAA,EAAE,EAAE9B,KAA7B;AAAoC,UAAA,KAAK,EAAEA,KAAK,CAAC8B,IAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACG9B,KAAK,CAAC8B,IADT,CADF;AAKD,OANA,CARH,CADF,CAtBF,CADF,EA2CE;AAAK,QAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,EAAE,EAAC,WAAR;AAAoB,QAAA,GAAG,EAAE3B,IAAI,CAAC4B,UAA9B;AAA0C,QAAA,GAAG,EAAC,QAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAAgB5B,IAAI,CAACF,QAArB,CAFF,CA3CF,EAgDE;AAAQ,QAAA,EAAE,EAAC,kBAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAhDF,CADF,EAmDE;AAAI,QAAA,EAAE,EAAC,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAnDF,CADF;AAuDD;;;;EAxEsBT,S;;AA+IzB,eAAeI,UAAf","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport * as api from '../Utils/fetchData';\nimport Err from './Err';\n\nclass AddArticle extends Component {\n  state = {\n    title: '',\n    body: '',\n    topic: '',\n    username: this.props.user.username,\n    topics: [],\n    hasError: false,\n    error: ''\n  };\n  render() {\n    const { user } = this.props;\n    const { topics } = this.state;\n\n    const { hasError, error } = this.state;\n    if (hasError) return <Err error={error} />;\n\n    return (\n      <div>\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"topAddArticleForm\">\n            <label htmlFor=\"title\" />\n            <input\n              id=\"title\"\n              type=\"text\"\n              onChange={this.handleChange}\n              value={this.state.title}\n              placeholder=\"Title\"\n              required\n            />\n            <label htmlFor=\"body\" />\n            <textarea\n              id=\"body\"\n              type=\"text\"\n              onChange={this.handleChange}\n              value={this.state.body}\n              placeholder=\"Body\"\n              required\n            />\n            <label className=\"selectLabel\" htmlFor=\"topic\">\n              Topic\n            </label>\n            <div className=\"categories\">\n              <select\n                className=\"select\"\n                id=\"topic\"\n                value={this.state.topic}\n                onChange={this.handleChange}\n                required\n              >\n                <option />\n                {topics.map(topic => {\n                  return (\n                    <option key={topic.slug} id={topic} value={topic.slug}>\n                      {topic.slug}\n                    </option>\n                  );\n                })}\n              </select>\n            </div>\n          </div>\n\n          <div className=\"postingAsBox\">\n            <img id=\"postingAs\" src={user.avatar_url} alt=\"avatar\" />\n            <p>Posting as: {user.username}</p>\n          </div>\n\n          <button id=\"addArticleButton\">Add Article</button>\n        </form>\n        <hr id=\"hr\" />\n      </div>\n    );\n  }\n  componentDidMount = () => {\n    this.setTopicArray();\n  };\n\n  handleChange = event => {\n    const { id, value } = event.target;\n    this.setState({\n      [id]: value\n    });\n  };\n  handleSubmit = event => {\n    event.preventDefault();\n    const { title, username, body, topic } = this.state;\n    const { fetchNewArticle } = this.props;\n\n    const object = {\n      username: username,\n      body: body,\n      title: title\n    };\n\n    axios\n      .post(\n        `https://lloyd-news.herokuapp.com/api/topics/${topic}/articles`,\n        object\n      )\n      .then(({ data }) => {\n        console.log(data);\n        let article = data.article;\n        article = { ...article, author: article.username };\n        delete article.username;\n        fetchNewArticle(article);\n      })\n      .then(() => {\n        this.setState({\n          username: '',\n          body: '',\n          title: ''\n        });\n      })\n      .catch(err => {\n        this.setState({\n          hasError: true,\n          error: err\n        });\n      });\n  };\n  setTopicArray = () => {\n    api.fetchTopics().then(topics => {\n      this.setState({\n        topics\n      });\n    })\n    .catch(err => {\n      \n        this.setState({\n          hasError: true,\n          error: err\n        });\n    })\n  };\n}\n\n\n\n\n\n\n\n\nexport default AddArticle;"]},"metadata":{},"sourceType":"module"}